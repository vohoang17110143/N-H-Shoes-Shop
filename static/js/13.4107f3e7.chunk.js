(this.webpackJsonpshop_cp=this.webpackJsonpshop_cp||[]).push([[13],{300:function(e,t,n){},301:function(e,t,n){"use strict";!function(t){function n(e){return window.btoa([].slice.call(new Uint8Array(e)).map((function(e){return String.fromCharCode(e)})).join(""))}e.exports=function(e,t){return"fetch"in window&&"Promise"in window?fetch(e,t||{}).then((function(e){return e.arrayBuffer()})).then(n):Promise.reject("[*] image-to-base64 is not compatible with your browser.")}}()},322:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(52),r=n.n(c),i=n(53),s=n(54),o=n(0),l=n(23),u=n(24),b=(n(116),n(300),n(83)),h=n(76),j=n(68),m=(n(81),n(301)),d=n.n(m),p=n(57),O=n(10);t.default=Object(l.b)((function(e){return{userInfo:e.UserInfo}}),(function(e){return{fetchUserInfo:function(t){e(Object(b.b)(t))}}}))((function(e){var t=Object(u.a)(localStorage.getItem("usertoken")),n=e.userInfo,c=n.name,l=n.phoneNumber,b=n.email,m=n.birthDay,f=n.image,g=n.address,x=Object(o.useState)(n.image),y=Object(s.a)(x,2),w=y[0],v=y[1],k=Object(o.useState)({}),N=Object(s.a)(k,2),C=N[0],S=N[1],I=Object(o.useState)({name:"",birthday:"",phoneNumber:"",email:"",image:null,address:""}),L=Object(s.a)(I,2),U=L[0],D=L[1],F=function(){var t=Object(i.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.getUserInfo(localStorage.getItem("cusID"));case 2:n=t.sent,e.fetchUserInfo(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){F()}),[]);null===U.image&&"https://localhost:5001/wwwroot/avatars/avatar-default.png"!==f&&d()(n.image).then((function(e){D(Object(a.a)(Object(a.a)({},U),{},{image:"data:image/jpeg;base64,".concat(e)}))})).catch((function(e){console.log(e)})),""===U.email&&D(Object(a.a)(Object(a.a)({},U),{},{email:b})),""===U.name&&D(Object(a.a)(Object(a.a)({},U),{},{name:c})),""===U.phoneNumber&&D(Object(a.a)(Object(a.a)({},U),{},{phoneNumber:l})),""===U.birthday&&D(Object(a.a)(Object(a.a)({},U),{},{birthday:m}));var A,E=function(){var e=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(U.email)||(a.email="*Email kh\xf4ng ph\xf9 h\u1ee3p"),U.name.length<4&&(a.username="*T\xean ng\u01b0\u1eddi d\xf9ng kh\xf4ng th\u1ec3 \xedt h\u01a1n 4 k\xfd t\u1ef1"),U.phoneNumber.length<9?a.phoneNumber="*S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng th\u1ec3 \xedt h\u01a1n 9 s\u1ed1":U.phoneNumber.length>11&&(a.phoneNumber="*S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng th\u1ec3 nhi\u1ec1u h\u01a1n 11 s\u1ed1"),S(a),0!=Object.keys(a).length){e.next=9;break}return e.next=9,h.a.updateUserInfo(n.customerId,U).then((function(e){F(),j.b.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng !")})).catch((function(e){j.b.error("Email \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng !")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(p.f,{style:{width:"90%"},children:[Object(O.jsx)(j.a,{}),Object(O.jsx)(p.h,{children:Object(O.jsx)("h5",{children:"Th\xf4ng tin t\xe0i kho\u1ea3n"})}),Object(O.jsx)(p.g,{children:Object(O.jsx)(p.q,{className:"form-horizontal",children:Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsxs)("div",{className:"phase1 ml-5",children:[Object(O.jsx)("span",{style:{color:"red",marginLeft:"13em"},children:C.username}),Object(O.jsx)("br",{}),Object(O.jsxs)(p.r,{row:!0,children:[Object(O.jsx)(p.u,{sm:"5",col:!0,htmlFor:"input-normal",children:"H\u1ecd v\xe0 t\xean:"}),Object(O.jsx)(p.i,{sm:"6",children:Object(O.jsx)(p.t,{style:{width:"250px"},maxLength:30,defaultValue:n.name,onChange:function(e){""===e.target.value&&D(Object(a.a)(Object(a.a)({},U),{},{name:c})),D(Object(a.a)(Object(a.a)({},U),{},{name:e.target.value}))},type:"text",id:"input-normal",name:"input-normal",placeholder:"T\xean ng\u01b0\u1eddi d\xf9ng",disabled:"facebook"==t.sub[4]})})]}),Object(O.jsx)("span",{style:{color:"red",marginLeft:"13em"},children:C.phoneNumber}),Object(O.jsxs)(p.r,{row:!0,children:[Object(O.jsx)(p.u,{sm:"5",col:!0,htmlFor:"input-normal",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"}),Object(O.jsx)(p.i,{sm:"6",children:Object(O.jsx)(p.t,{style:{width:"250px"},maxLength:11,defaultValue:n.phoneNumber,onChange:function(e){""===e.target.value&&D(Object(a.a)(Object(a.a)({},U),{},{phoneNumber:l})),D(Object(a.a)(Object(a.a)({},U),{},{phoneNumber:e.target.value}))},type:"number",id:"input-normal",name:"input-normal",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"})})]}),Object(O.jsx)("span",{style:{color:"red",marginLeft:"13em"},children:C.email}),Object(O.jsxs)(p.r,{row:!0,children:[Object(O.jsx)(p.u,{sm:"5",col:!0,htmlFor:"input-normal",children:"Email:"}),Object(O.jsx)(p.i,{sm:"6",children:Object(O.jsx)(p.t,{style:{width:"250px"},defaultValue:n.email,onChange:function(e){""===e.target.value&&D(Object(a.a)(Object(a.a)({},U),{},{email:b})),D(Object(a.a)(Object(a.a)({},U),{},{email:e.target.value}))},type:"email",id:"input-normal",name:"input-normal",placeholder:"Email",disabled:"facebook"==t.sub[4]})})]}),"facebook"==t.sub[4]?null:Object(O.jsxs)(p.r,{row:!0,children:[Object(O.jsx)(p.u,{sm:"5",col:!0,htmlFor:"input-normal",children:"Ng\xe0y th\xe1ng n\u0103m sinh:"}),Object(O.jsxs)(p.i,{sm:"6",children:[Object(O.jsx)("p",{children:(A=n.birthDay,new Date(A).toLocaleDateString([],{year:"numeric",month:"long",day:"numeric"}))}),Object(O.jsx)(p.t,{style:{width:"250px"},onChange:function(e){""===e&&D(Object(a.a)(Object(a.a)({},U),{},{birthday:m})),D(Object(a.a)(Object(a.a)({},U),{},{birthday:e.target.value}))},type:"date",id:"input-normal",name:"input-normal",disabled:"facebook"==t.sub[4]})]})]}),Object(O.jsxs)(p.r,{row:!0,children:[Object(O.jsx)(p.u,{sm:"5",col:!0,htmlFor:"input-normal",children:"\u0110\u1ecba ch\u1ec9:"}),Object(O.jsx)(p.i,{sm:"6",children:Object(O.jsx)(p.A,{style:{width:"250px"},onChange:function(e){""===e&&D(Object(a.a)(Object(a.a)({},U),{},{address:g})),D(Object(a.a)(Object(a.a)({},U),{},{address:e.target.value}))},type:"text",id:"input-normal",name:"input-normal",defaultValue:n.address})})]})]}),Object(O.jsxs)("div",{className:"phase2",children:[Object(O.jsx)("div",{className:"img-holder",children:Object(O.jsx)("img",{src:w,alt:"",id:"img",className:"img-preview"})}),Object(O.jsx)(p.t,{onChange:function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&(v(t.result),D(Object(a.a)(Object(a.a)({},U),{},{image:t.result})))},t.readAsDataURL(e.target.files[0])},type:"file",accept:"image/*",name:"image-upload",className:"mt-3",id:"input",disabled:"facebook"==t.sub[4]})]})]})})}),Object(O.jsx)(p.e,{type:"button",color:"warning",onClick:"facebook"==t.sub[4]?function(){h.a.editCustomerSocial(n.customerId,U).then((function(e){return alert(e.message)})).catch((function(e){return alert(e)}))}:E,children:"C\u1eadp nh\u1eadt"})]})}))}}]);
//# sourceMappingURL=13.4107f3e7.chunk.js.map